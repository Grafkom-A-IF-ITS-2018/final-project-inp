<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>Control</title>
    <style>
        .planet {
          display: inline-block;
          padding: 15px 25px;
          font-size: 24px;
          cursor: pointer;
          text-align: center;
          text-decoration: none;
          outline: none;
          color: #fff;
          background-color: #4CAF50;
          border: none;
          border-radius: 15px;
          box-shadow: 0 9px #999;
        }
        .planet:hover {background-color: #3e8e41}
        .planet:active {
          background-color: #3e8e41;
          box-shadow: 0 5px #666;
          transform: translateY(4px);
        }

        .satellite {
          display: inline-block;
          border-radius: 4px;
          background-color: #f4511e;
          border: none;
          color: #FFFFFF;
          text-align: center;
          font-size: 28px;
          padding: 20px;
          width: 200px;
          transition: all 0.5s;
          cursor: pointer;
          margin: 5px;
        }
        .satellite span {
          cursor: pointer;
          display: inline-block;
          position: relative;
          transition: 0.5s;
        }
        .satellite span:after {
          content: '\00bb';
          position: absolute;
          opacity: 0;
          top: 0;
          right: -20px;
          transition: 0.5s;
        }
        .satellite:hover span {
          padding-right: 25px;
        }
        .satellite:hover span:after {
          opacity: 1;
          right: 0;
        }
    </style>
</head>
<body>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Planet</th>
                <th scope="col">Bulan</th>
            </tr>
        </thead>
        <tbody id='button-data'>

        </tbody>
    </table>
    <script src="http://10.151.252.208:8080/socket.io.js"></script>
    <script>
        'use strict'
        var socket = new io();

        socket.connect('http://10.151.252.208:8080'); 
        socket.emit('create', 'controller');

        // Sends a message to the server via sockets
        function sendMessageToServer(message) {
            socket.emit('message', message);
        };

        function clickButton(id){
            console.log(id)
            socket.emit('button.planet.click', id)
        }

        function travelToPlanet(id){
            socket.emit('travel', id)
        }

        sendMessageToServer('The Jorney of Solar System');
    </script>
    <script>
        var request = new XMLHttpRequest();
        var data;
        request.open('GET', './data/solarsystem.json', false)
        request.send()
        if(request.status === 200){
            data = JSON.parse(request.responseText);
        }

        var tabelElement = document.getElementById('button-data');

        for(var i = 0; i < data.planets.length; i++){
            var planetId = data.planets[i].id;
            var planetName = data.planets[i].name;
            var stringButtonPlanet = `<button onclick=clickButton(${planetId}) class='planet' id='${planetId}'>${planetName}</button>`;
            var stringButtonMoons = '';
            if(data.planets[i].satellites.length){
                for(var j = 0; j < data.planets[i].satellites.length; j++){
                    var moonId = data.planets[i].satellites[j].id;
                    var moonName = data.planets[i].satellites[j].name;
                    stringButtonMoons += `<button onclick=clickButton('${moonId}') class='satellite' id='${moonId}'>${moonName}</button>`;
                }
            }
            tabelElement.innerHTML += `<tr><td>${i+1}</td><td>${stringButtonPlanet}</td><td>${stringButtonMoons}</td></tr>`;
        }
    </script>
</body>
</html>